"use strict";(globalThis["webpackChunkideahut_quasar_template"]=globalThis["webpackChunkideahut_quasar_template"]||[]).push([[743],{6743:(l,e,a)=>{a.r(e),a.d(e,{default:()=>L});var s=a(1758),o=a(8790);const n={class:"full-width row flex-center text-accent q-gutter-sm"},t={class:"text-subtitle2"},i={key:0},d={class:"col-6 text-left"},c={class:"col-6 text-right"};function u(l,e,a,u,r,b){const g=(0,s.g2)("q-space"),f=(0,s.g2)("q-tooltip"),h=(0,s.g2)("q-btn"),m=(0,s.g2)("q-icon"),p=(0,s.g2)("q-inner-loading"),k=(0,s.g2)("q-table"),_=(0,s.g2)("q-card-section"),q=(0,s.g2)("q-input"),w=(0,s.g2)("q-card-actions"),F=(0,s.g2)("q-card"),y=(0,s.g2)("q-dialog"),v=(0,s.gN)("close-popup");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(k,{class:"table-sticky-header q-ma-sm",rows:u.table.rows,columns:u.columns,"row-key":"name",loading:u.table.loading,selection:"single",selected:u.table.selected,"onUpdate:selected":e[0]||(e[0]=l=>u.table.selected=l),dense:l.$q.screen.lt.md,"no-data-label":l.$t("error.data_not_available"),"rows-per-page-label":" ","selected-rows-label":l=>{},"binary-state-sort":"",separator:"cell","hide-bottom":"",bordered:""},{top:(0,s.k6)((()=>[(0,s.bF)(g),(0,s.bF)(h,{glossy:"",round:"",dense:"",class:"q-ma-none q-ml-md",color:"indigo",icon:"refresh",loading:u.table.loading,onClick:b.do_request},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(l.$t("label.refresh")),1)])),_:1})])),_:1},8,["loading","onClick"])])),"no-data":(0,s.k6)((({message:l})=>[(0,s.Lk)("div",n,[(0,s.bF)(m,{size:"2em",name:"block"}),(0,s.Lk)("span",t,(0,o.v_)(l),1)])])),loading:(0,s.k6)((()=>[(0,s.bF)(p,{showing:"",color:"primary"})])),"body-selection":(0,s.k6)((e=>[!0===e.row.canExecute?((0,s.uX)(),(0,s.CE)("div",i,[(0,s.bF)(h,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"pink-10",icon:"delete",loading:u.table.flushing.db[e.row.name],onClick:l=>b.on_flush_click("db",e)},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(l.$t("label.flush_db")),1)])),_:1})])),_:2},1032,["loading","onClick"]),(0,s.bF)(h,{glossy:"",round:"",dense:"",size:"sm",class:"q-ma-none q-ml-xs q-mr-sm",color:"deep-orange-10",icon:"delete_sweep",loading:u.table.flushing.all[e.row.name],onClick:l=>b.on_flush_click("all",e)},{default:(0,s.k6)((()=>[(0,s.bF)(f,null,{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(l.$t("label.flush_all")),1)])),_:1})])),_:2},1032,["loading","onClick"])])):(0,s.Q3)("",!0)])),_:1},8,["rows","columns","loading","selected","dense","no-data-label"]),(0,s.bF)(y,{modelValue:u.flush.show,"onUpdate:modelValue":e[2]||(e[2]=l=>u.flush.show=l),persistent:""},{default:(0,s.k6)((()=>[(0,s.bF)(F,{class:"login-form-bg"},{default:(0,s.k6)((()=>[(0,s.bF)(_,{class:"q-pa-xs q-pl-lg q-pr-lg text-center"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(l.$t("label.flush_input_code")),1)])),_:1}),(0,s.bF)(_,{class:"q-pa-xs q-pl-lg q-pr-lg text-center text-weight-bold"},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(u.flush.text),1)])),_:1}),(0,s.bF)(_,{class:"q-pa-sm"},{default:(0,s.k6)((()=>[(0,s.bF)(q,{modelValue:u.flush.code,"onUpdate:modelValue":e[1]||(e[1]=l=>u.flush.code=l),type:"text",filled:"",dense:"","input-class":"text-center"},null,8,["modelValue"])])),_:1}),(0,s.bF)(w,{class:"row"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",d,[(0,s.bo)((0,s.bF)(h,{"no-caps":"",ripple:"",glossy:"",label:l.$t("label.cancel"),color:"negative"},null,8,["label"]),[[v]])]),(0,s.Lk)("div",c,[(0,s.bF)(h,{"no-caps":"",ripple:"",glossy:"",label:l.$t("label.continue"),color:"positive",loading:u.flush.loading,disable:!u.flush.code,onClick:b.on_flush_click},null,8,["label","loading","disable","onClick"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=a(8734),b=a(9928),g=a(8916),f=a(526);const h={setup(){return{util:b.Z,type:(0,r.KR)(null),bean:(0,r.KR)(null),is_group:(0,r.KR)(!1),columns:[],table:(0,r.KR)({rows:[],columns:[],loading:!1,flushing:{all:{},db:{}}}),flush:(0,r.KR)({show:!1,loading:!1,name:null,type:null,text:null,code:null})}},created(){let l=this;l.columns=[{name:"label",label:l.$t("label.name"),field:"label",align:"left",sortable:!0},{name:"keyType",label:l.$t("label.key"),field:"keyType",align:"left",sortable:!0},{name:"valueType",label:l.$t("label.value"),field:"valueType",align:"left",sortable:!0}],l.do_request()},methods:{do_request(){let l=this;l.table.loading=!0,f.F.call({path:"/redis/infos",onFinish(){l.table.loading=!1},onSuccess(e){if(b.Z.isArray(e)){l.table.rows=e;for(const e of l.table.rows)l.table.flushing.all[e.name]=!1,l.table.flushing.db[e.name]=!1}}})},on_flush_click(l,e){let a=this;b.Z.isDefined(l)&&b.Z.isDefined(e)?g.L.confirm((function(){a.table.flushing[l][e.row.name]=!0,f.F.call({path:"/redis/flush/"+l,params:{name:e.row.name},onFinish(){a.table.flushing[l][e.row.name]=!1},onSuccess(s){b.Z.isString(s)&&(a.flush={show:!0,loading:!1,name:e.row.name,type:l,text:s,code:null})}})}),"confirm.flush_"+l,e.row.label):(a.flush.loading=!0,f.F.call({path:"/redis/flush/"+a.flush.type,method:"post",params:{name:a.flush.name,code:a.flush.code},onFinish(){a.flush.loading=!1},onSuccess(l){a.flush.show=!1}}))}}};var m=a(2807),p=a(3621),k=a(1173),_=a(9001),q=a(8151),w=a(4609),F=a(4264),y=a(7201),v=a(7569),x=a(7066),C=a(8020),A=a(6334),Q=a(2769),$=a(8582),T=a.n($);const K=(0,m.A)(h,[["render",u]]),L=K;T()(h,"components",{QTable:p.A,QSpace:k.A,QBtn:_.A,QTooltip:q.A,QIcon:w.A,QInnerLoading:F.A,QDialog:y.A,QCard:v.A,QCardSection:x.A,QInput:C.A,QCardActions:A.A}),T()(h,"directives",{ClosePopup:Q.A})}}]);